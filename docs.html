<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø³Ù„Ø© Ø·Ù„Ø¨Ø§ØªÙƒ | Ù…Ø´Ø§Ø¹Ù„ Ù„Ù„Ø¹ÙˆØ¯</title>
<style>
body{margin:0;font-family:'Tajawal',sans-serif;background:#000;color:#fff;padding:20px;}
h1{color:#c40000;text-align:center;margin-bottom:20px;}
textarea{width:100%;height:300px;padding:10px;border-radius:10px;border:none;font-family:'Tajawal',sans-serif;font-size:16px;}
input, button{padding:10px;margin-top:10px;border-radius:10px;border:none;font-size:16px;}
button{background:#c40000;color:#fff;cursor:pointer;}
button:hover{background:#a00000;}
label{display:block;margin-top:15px;}
</style>
</head>
<body>

<h1>Ø³Ù„Ø© Ø·Ù„Ø¨Ø§ØªÙƒ</h1>

<label>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„:</label>
<input type="text" id="customerName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§">

<textarea id="invoice" readonly></textarea>

<button onclick="sendWhatsApp()">Ø¥Ø±Ø³Ø§Ù„ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨</button>

<script>
function loadCart(){
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const customer = document.getElementById('customerName').value || '{Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„}';
    let total = 0;
    let text = "Â»             ï´¿ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³ØªÙˆØ±Ø¯ ï´¾\n";
    text += "â” â‹… â”€â”€â”€â”€â”€â” â€¢    âƒŸï·½ â€¢ â”â”€â”€â”€â”€â”€ â‹… â”\n";

    cart.forEach(item => {
        text += `âŒ¯â¤¿ ${item.name} â†«${item.qty} â†«${item.price} Ø±ÙŠØ§Ù„\n`;
        total += item.price;
    });

    text += "â” â‹… â”€â”€â”€â”€â”€â” â€¢    âƒŸï·½ â€¢ â”â”€â”€â”€â”€â”€ â‹… â”\n";
    text += `âŒ¯â¤¿ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø§Ø¬Ù…Ø§Ù„ÙŠ â†«${total} Ø±ÙŠØ§Ù„\n`;
    text += `âŒ¯â¤¿ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ â†«${customer}\n`;
    text += "ÙØ¶Ù„Ø§ ÙˆÙ„ÙŠØ³ Ø§Ù…Ø±Ø§ ØªØ§ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ Ø«Ù… Ø§Ø±Ø³Ø§Ù„ Ù…ÙˆÙ‚Ø¹ ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø·Ù„Ø¨\n";
    text += "â” â‹… â”€â”€â”€â”€â”€â” â€¢    âƒŸï·½ â€¢ â”â”€â”€â”€â”€â”€ â‹… â”\n";
    text += "Ù…ØªØ¬Ø± Ù…Ù€Ø´Ù€Ø§Ø¹Ù€Ù„ Ù„Ù€Ù„Ù€Ù€Ø¹Ù€ÙˆØ¯ ğŸª·à¼…";

    document.getElementById('invoice').value = text;
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¹Ù†Ø¯ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù…
document.getElementById('customerName').addEventListener('input', loadCart);

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
window.addEventListener('load', loadCart);

// Ø¥Ø±Ø³Ø§Ù„ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨
function sendWhatsApp(){
    const invoiceText = encodeURIComponent(document.getElementById('invoice').value);
    // Ø±Ù‚Ù… Ø§Ù„Ù…ØªØ¬Ø±
    const phone = '212601432914';
    window.open(`https://wa.me/${phone}?text=${invoiceText}`, '_blank');
}
</script>

</body>
</html>